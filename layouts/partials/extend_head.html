<script>
// Immediately set theme before page renders to avoid flash
(function() {
    const savedTheme = localStorage.getItem('pref-theme');
    const systemDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    if (savedTheme === 'dark' || (!savedTheme && systemDark)) {
        document.documentElement.classList.add('dark');
        document.body.classList.add('dark');
    }
})();
</script>
